<!DOCTYPE HTML>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>优工到店</title>
		<!--   引入该JS，全局注入getMetaInfo方法   -->
		<script type="text/javascript" src="https://o.alicdn.com/yd-cloudauth/cloudauth-cdn/jsvm_all.js"></script>
	</head>
	<body>
		<div></div>
		<script>
			// 在调用实人认证服务端发起认证请求时需要传入该MetaInfo值
			let MetaInfo = window.getMetaInfo();
			const metaInfoStr = JSON.stringify(MetaInfo);
			const requestBody = {
				metaInfo: metaInfoStr
			};
			// localStorage.setItem('token',
			// 	'eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiI3OGMxNTY1NDkwZmUyNzE4MTJhZGIwMjFhMTdkZDdlNCIsImlhdCI6MTc2MTE5NjgzNX0.njM95i3oHsxUvacAsdOoOPfic6fKgPtxqGVwUfgrHIo'
			// )
			// 请求认证业务接口获取CertifyUrl 
			fetch('https://worker-api.yougongdaodian.com/flex/api/v1/ali_cloud_auth/initFaceVerify', {
					method: 'POST',
					headers: {
						"Content-Type": "application/json",
						token: 'eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiI3OGMxNTY1NDkwZmUyNzE4MTJhZGIwMjFhMTdkZDdlNCIsImlhdCI6MTc2MTE5NjgzNX0.njM95i3oHsxUvacAsdOoOPfic6fKgPtxqGVwUfgrHIo'
					},
					// body: `metaInfo=${encodeURIComponent(metaInfoStr)}`
					body: JSON.stringify(requestBody)
					// body: formData
				})
				.then(response => response.json())
				.then(data => {
					console.log('data:', data)
					alert(data.message);
					// 获取CertifyUrl后跳转至认证页面
					window.location.href = data.resultObject.certifyUrl;
				});
		</script>
	</body>
</html>